<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="viggo"/>
    <title>{{ .ConfigSite.SiteTitle }}</title>
    <meta name="keywords" content="{{ .ConfigSite.SiteKeyword }}">
    <meta name="description" content="{{ .ConfigSite.SiteDesc }}">

    {{ if .ConfigSite.SiteFavicon }}
        <link rel="shortcut icon" href="data:image/png;base64,{{ .ConfigSite.SiteFavicon }}">
    {{ else }}
        <link rel="shortcut icon" href="/assets/static/index/images/favicon.png">
    {{ end }}

    <link rel="stylesheet" href="/assets/static/index/css/fonts/linecons/css/linecons.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/static/index/css/bootstrap.css">
    <link rel="stylesheet" href="/assets/static/index/css/xenon-core.css">
    <link rel="stylesheet" href="/assets/static/index/css/xenon-components.css">
    <link rel="stylesheet" href="/assets/static/index/css/xenon-skins.css">
    <link rel="stylesheet" href="/assets/static/index/css/nav.css">
    <link rel="stylesheet" href="/assets/static/index/css/hclonely.css">
    <link rel="stylesheet" href="/assets/static/index/css/ant-card.css">
    <script src="/assets/static/index/js/jquery-1.11.1.min.js"></script>
    <script>
        var userDefinedSearchData = {
            "custom": false,
            "thisSearch": "https://www.baidu.com/s?wd=",
            "thisSearchIcon": "url(https://www.baidu.com/favicon.ico)",
            "hotStatus": true,
            "data": [{"name": "百度", "img": "url(https://www.baidu.com/favicon.ico)", "url": "https://www.baidu.com/s?wd="}]
        };
    </script>
    <script src="/assets/static/index/js/header.js"></script>
</head>

<body class="page-body">
<!-- skin-white -->
<div class="page-container">
    <div class="sidebar-menu toggle-others collapsed">
        <div class="sidebar-menu-inner">
            <header class="logo-env">
                <!-- logo -->
                <div class="logo">
                    <a href="/" class="logo-expanded">
                        {{ if .ConfigSite.SiteLogo }}
                            <img src="data:image/png;base64,{{ .ConfigSite.SiteLogo }}" height="32" alt=""/>
                        {{ else }}
                            <img src="/assets/static/index/images/logo@2x.png" height="32" alt=""/>
                        {{ end }}
                        <span class="logo-text">{{ .ConfigSite.SiteTitle }}</span>
                    </a>
                    <a href="/" class="logo-collapsed">
                        <img src="/assets/static/index/images/logo-collapsed@2x.png" width="32" alt=""/>
                    </a>
                </div>
                <div class="mobile-menu-toggle visible-xs">
                    <a href="#" data-toggle="user-info-menu">
                        <i class="linecons-cog"></i>
                    </a>
                    <a href="#" data-toggle="mobile-menu">
                        <i class="fa fa-bars"></i>
                    </a>
                </div>
            </header>
            <ul id="main-menu" class="main-menu">
                {{ range .CategoryTree }}
                {{ if .Child }}
                <li class="has-sub">
                    <a href="javascript:void(0)">
                        <i class="{{ .Icon }}"></i>
                        <span class="title">{{ .Name }}</span>
                    </a>
                    <ul>
                        {{ range .Child }}
                        <li>
                            <a href="#{{ .Name }}" class="smooth">
                                <span class="title">{{ .Name }}</span>
                            </a>
                        </li>
                        {{ end }}
                    </ul>
                </li>
                {{ else }}
                <li>
                    <a href="#{{ .Name }}" class="smooth">
                        <i class="{{ .Icon }}"></i>
                        <span class="title">{{.Name}}</span>
                    </a>
                </li>
                {{ end }}
                {{ end }}

                {{ if .About.IsAbout }}
                <li>
                    <a href="/about">
                        <i class="fa fa-heart-o"></i>
                        <span class="title">关于本站</span>
                    </a>
                </li>
                {{ end }}
            </ul>
        </div>
    </div>
    <div class="main-content">
        <nav class="navbar user-info-navbar" role="navigation">
            <!-- User Info, Notifications and Menu Bar -->
            <!-- Left links for user info navbar -->
            <ul class="user-info-menu left-links list-inline list-unstyled">
                <li class="hidden-sm hidden-xs">
                    <a href="#" data-toggle="sidebar" style="font-size: 18px;">
                        <i class="fa fa-bars"></i>
                    </a>
                </li>
                <li class="hidden-xs" style="display: flex; align-items: center; padding-left: 10px;">
                    <span style="color: rgba(0,0,0,0.45); font-size: 14px;">首页 / 项目列表</span>
                </li>
            </ul>
            <ul class="user-info-menu right-links list-inline list-unstyled">
            </ul>
        </nav>
        <div class="content-container">
            <!-- 搜索 -->
            <section class="sousuo">
            <div class="search">
                <div class="search-box">
                    <span class="search-icon"
                          style="background: url(/assets/static/index/images/search_icon.png) 0px 0px; opacity: 1;"></span>
                    <input type="text" id="txt" class="search-input" autocomplete="off" placeholder="请输入关键字，按回车 / Enter 搜索" style="padding-right: 150px;">
                    <button class="translate-btn" id="translate-btn" title="翻译" onclick="var s=document.getElementById('txt').value; if(s){window.open('https://translate.google.com/?sl=auto&tl=zh-CN&text='+encodeURIComponent(s)+'&op=translate')}else{window.open('https://translate.google.com/')}" style="position: absolute; right: 100px; top: 0; width: 50px; line-height: 48px; background: transparent; border: none; font-size: 20px; color: #1890ff; outline: none; padding: 0 10px; cursor: pointer; z-index: 999;"><i class="fa fa-language"></i></button>
                    <button class="ai-btn" id="ai-btn" title="AI 问答" onclick="var s=document.getElementById('txt').value; var token='{{ .ConfigSite.AiToken }}'; if(token && token.startsWith('http')){ window.open(token + encodeURIComponent(s)) } else if(s){window.open('https://metaso.cn/?q='+encodeURIComponent(s))}else{window.open('https://metaso.cn/')}" style="position: absolute; right: 50px; top: 0; width: 50px; line-height: 48px; background: transparent; border: none; font-size: 16px; font-weight: bold; color: #1890ff; outline: none; padding: 0 10px; cursor: pointer; z-index: 999;">AI</button>
                    <button class="search-btn" id="search-btn"><i class="fa fa-search"></i></button>
                </div>
                <!-- 搜索热词 -->
                <div class="box search-hot-text" id="box" style="display: none;">
                    <ul></ul>
                </div>
                <!-- 搜索引擎 -->
                <div class="search-engine" style="display: none;">
                    <div class="search-engine-head">
                        <strong class="search-engine-tit">选择您的默认搜索引擎：</strong>
                        <div class="search-engine-tool">
                            搜索热词： <span id="hot-btn" style="background-image: url(/assets/bootstrap/images/index/off_on.png);"></span>
                        </div>
                    </div>
                    <ul class="search-engine-list search-engine-list_zmki_ul">
                    </ul>
                </div>
            </div>
        </section>
        <script>search('/assets/static/index/images/search_icon.png')</script>

        <!-- 分类筛选 -->
        <div class="category-filter">
            <div class="filter-item">
                <div class="filter-label">分类查找:</div>
                <div class="filter-tags" id="category-tags">
                    <div class="filter-tag active" data-category="all">全部</div>
                    {{ range .CategorySites }}
                    <div class="filter-tag" data-category="{{ .Category }}">{{ .Category }}</div>
                    {{ end }}
                </div>
            </div>
        </div>

        <!-- 常用推荐 -->
        <div id="sites-container">
        {{ range .CategorySites }}
        {{ if .SiteList }}
        <div class="category-section" data-category="{{ .Category }}">
            <h4 class="text-gray"><i class="linecons-tag" style="margin-right: 7px;" id="{{ .Category }}"></i>{{ .Category }}</h4>
            <div class="row">
                {{ range .SiteList }}
                <div class="col-sm-4 col-md-3">
                    <div class="ant-card" onclick="window.open('{{ .URL }}', '_blank')"
                         data-toggle="tooltip" data-placement="bottom" title="{{ .Description }}">
                        <div class="ant-card-cover">
                            <img data-src="data:image/png;base64,{{ .Icon }}" class="lozad" alt="{{ .Title }}">
                        </div>
                        <div class="ant-card-body">
                            <div class="ant-card-meta-title">{{ .Title }}</div>
                            <div class="ant-card-meta-description">{{ .Description }}</div>
                        </div>
                        <div class="ant-card-footer">
                            <span><i class="fa fa-clock-o" style="margin-right: 4px;"></i>{{ .CreatedAt.Format "2006-01-02" }}</span>
                            <i class="fa fa-external-link"></i>
                        </div>
                    </div>
                </div>
                {{ end }}
            </div>
            <br/>
        </div>
        {{ end }}
        {{ end }}
        </div>
        <!-- END 常用推荐 -->
        </div>
        <footer class="main-footer sticky footer-type-1">
            <div class="footer-inner">
                <!-- Add your copyright text here -->
                {{ if .ConfigSite.SiteRecord }}
                <div class="footer-text">
                    <strong>{{ .ConfigSite.SiteRecord }}</strong>
                </div>
                {{ else }}
                <div class="footer-text">
                    &copy; 2025-<script>document.write(new Date().getFullYear())</script>
                    <a href="/about">
                        <strong>飞比智能 </strong>
                    </a>
                    design by
                    <a href="https://github.com/freeb-vip/webstack-go.git" target="_blank">
                        <strong>致谢 Ch3nnn 开源</strong>
                    </a>
                </div>
                {{ end }}
                <!-- Go to Top Link, just add rel="go-top" to any link to add this functionality -->
                <div class="go-up">
                    <a href="#" rel="go-top">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>
            </div>
        </footer>
    </div>
</div>
<!-- 锚点平滑移动 -->
<script type="text/javascript">
    $(document).ready(function () {
        //img lazy loaded
        const observer = lozad();
        observer.observe();

        $(document).on('click', '.has-sub', function () {
            var _this = $(this)
            if (!$(this).hasClass('expanded')) {
                setTimeout(function () {
                    _this.find('ul').attr("style", "")
                }, 300);

            } else {
                $('.has-sub ul').each(function (id, ele) {
                    const _that = $(this);
                    if (_this.find('ul')[0] !== ele) {
                        setTimeout(function () {
                            _that.attr("style", "")
                        }, 300);
                    }
                })
            }
        })
        $('.user-info-menu .hidden-sm').click(function () {
            if ($('.sidebar-menu').hasClass('collapsed')) {
                $('.has-sub.expanded > ul').attr("style", "")
            } else {
                $('.has-sub.expanded > ul').show()
            }
        })
        $("#main-menu li ul li").click(function () {
            $(this).siblings('li').removeClass('active'); // 删除其他兄弟元素的样式
            $(this).addClass('active'); // 添加当前元素的样式
        });
        $(document).on('click', 'a.smooth', function (ev) {
            ev.preventDefault();

            const href = decodeURI($(this).attr("href"));
            const category = href.startsWith('#') ? href.substring(1) : "";

            if (category) {
                // 1. 触发分类筛选逻辑
                const $filterTag = $(`.filter-tag[data-category="${category}"]`);
                if ($filterTag.length) {
                    $filterTag.click();
                } else {
                    $('.filter-tag[data-category="all"]').click();
                }

                // 2. 更新侧边栏激活状态
                $("#main-menu li").removeClass("active");
                $(this).parent("li").addClass("active");
                $(this).parents(".has-sub").addClass("active");

                // 3. 移动端菜单收起
                if (typeof public_vars !== 'undefined' && public_vars.$mainMenu.hasClass('mobile-is-visible')) {
                    public_vars.$mainMenu.add(public_vars.$sidebarProfile).removeClass('mobile-is-visible');
                    ps_destroy();
                }

                // 4. 平滑滚动
                const target = document.getElementById(category);
                if (target) {
                    $("html, body").animate({
                        scrollTop: $(target).offset().top - 30
                    }, {
                        duration: 500,
                        easing: "swing"
                    });
                }
            }
        });
        return false;
    });

    // 分类筛选逻辑
    $(document).on('click', '.filter-tag', function() {
        const category = $(this).data('category');
        
        // 切换激活状态
        $('.filter-tag').removeClass('active');
        $(this).addClass('active');
        
        if (category === 'all') {
            $('.category-section').fadeIn(300);
        } else {
            $('.category-section').hide();
            $(`.category-section[data-category="${category}"]`).fadeIn(300);
        }
        
        // 重新触发懒加载
        const observer = lozad();
        observer.observe();
    });
</script>
<!-- Bottom Scripts -->
<script src="/assets/static/index/js/bootstrap.min.js"></script>
<script src="/assets/static/index/js/TweenMax.min.js"></script>
<script src="/assets/static/index/js/resizeable.js"></script>
<script src="/assets/static/index/js/joinable.js"></script>
<script src="/assets/static/index/js/xenon-api.js"></script>
<script src="/assets/static/index/js/xenon-toggles.js"></script>
<!-- JavaScripts initializations and stuff -->
<script src="/assets/static/index/js/xenon-custom.js"></script>
<script src="/assets/static/index/js/lozad.js"></script>
</body>
</html>
